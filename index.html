<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stripe QR Payment</title>
</head>
<body>
  <h1>ğŸ’° è¾“å…¥é‡‘é¢å¹¶æ‰«ç ä»˜æ¬¾</h1>
  <label>é‡‘é¢ï¼ˆç¾å…ƒï¼‰ï¼š<input type="number" id="amount" step="0.01" placeholder="ä¾‹å¦‚ 49.99" /></label><br/><br/>
  <label>å¤‡æ³¨ / å§“å / æ¬¾å¼ï¼š<input type="text" id="note" placeholder="ä¾‹å¦‚ Lisa, ç²‰æ°´æ™¶ + ç”Ÿå‘½æ•°å­— 7" /></label><br/><br/>
  <button onclick="generateQRCode()">ç”ŸæˆäºŒç»´ç </button>
  <br/><br/>
  <img id="qr" src="" alt="äºŒç»´ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ" width="300" />

  <script>
    async function generateQRCode() {
      const amountInput = document.getElementById('amount').value;
      const noteInput = document.getElementById('note').value;

      if (!amountInput || isNaN(amountInput)) {
        alert("è¯·è¾“å…¥æ­£ç¡®é‡‘é¢");
        return;
      }

      const amountInCents = Math.round(parseFloat(amountInput) * 100);

      const response = await fetch('/create-checkout-session', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          amount: amountInCents,
          customer_note: noteInput
        })
      });

      const data = await response.json();
      if (data.qrCode) {
        document.getElementById('qr').src = data.qrCode;
      } else {
        alert("äºŒç»´ç ç”Ÿæˆå¤±è´¥");
      }
    }
  </script>
</body>
</html>
